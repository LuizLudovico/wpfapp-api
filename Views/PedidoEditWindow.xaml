<Window x:Class="WpfApp.Views.PedidoEditWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Editar Pedido" Height="600" Width="900"
        WindowStartupLocation="CenterScreen"
        Background="White">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- TÃ­tulo e Info do Cliente -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="ðŸ“ Editar Pedido" FontSize="24" FontWeight="Bold" Foreground="#2C3E50" Margin="0,0,0,10"/>
            <TextBlock FontSize="14" Foreground="#7F8C8D">
                <Run Text="Cliente: " FontWeight="Bold"/>
                <Run Text="{Binding Pedido.NomeCliente}"/>
            </TextBlock>
            <TextBlock FontSize="14" Foreground="#7F8C8D">
                <Run Text="Data: " FontWeight="Bold"/>
                <Run Text="{Binding Pedido.DataVenda, StringFormat=dd/MM/yyyy}"/>
            </TextBlock>
        </StackPanel>

        <!-- Adicionar Produto -->
        <Border Grid.Row="1" BorderBrush="#BDC3C7" BorderThickness="1" Padding="15" CornerRadius="5" Margin="0,0,0,15" Background="#ECF0F1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="120"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Margin="0,0,10,0">
                    <TextBlock Text="Produto:" FontWeight="Bold" Margin="0,0,0,5"/>
                    <ComboBox ItemsSource="{Binding ProdutosDisponiveis}"
                              SelectedItem="{Binding ProdutoSelecionado}"
                              DisplayMemberPath="Nome"
                              Height="30"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Margin="0,0,10,0">
                    <TextBlock Text="Quantidade:" FontWeight="Bold" Margin="0,0,0,5"/>
                    <TextBox Text="{Binding Quantidade, UpdateSourceTrigger=PropertyChanged}" Height="30" VerticalContentAlignment="Center"/>
                </StackPanel>

                <StackPanel Grid.Column="2" VerticalAlignment="Bottom">
                    <Button Content="âž• Adicionar" Command="{Binding AdicionarProdutoCommand}"
                            Background="#3498DB" Foreground="White" Padding="15,7" BorderThickness="0" Cursor="Hand" Height="30"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Lista de Itens do Pedido -->
        <Border Grid.Row="2" BorderBrush="#BDC3C7" BorderThickness="1" Padding="15" CornerRadius="5" Margin="0,0,0,15">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Text="Itens do Pedido:" FontWeight="Bold" FontSize="14" Margin="0,0,0,10"/>

                <DataGrid Grid.Row="1" ItemsSource="{Binding Pedido.Itens}"
                          SelectedItem="{Binding ItemSelecionado}"
                          AutoGenerateColumns="False"
                          IsReadOnly="True"
                          HeadersVisibility="Column"
                          GridLinesVisibility="Horizontal"
                          AlternatingRowBackground="#F8F9FA"
                          Margin="0,0,0,10">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Produto" Binding="{Binding NomeProduto}" Width="*"/>
                        <DataGridTextColumn Header="Quantidade" Binding="{Binding Quantidade}" Width="100"/>
                        <DataGridTextColumn Header="PreÃ§o Unit." Binding="{Binding PrecoUnitario, Converter={StaticResource CurrencyConverter}}" Width="120"/>
                        <DataGridTextColumn Header="Subtotal" Binding="{Binding Subtotal, Converter={StaticResource CurrencyConverter}}" Width="120"/>
                    </DataGrid.Columns>
                </DataGrid>

                <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="ðŸ—‘ï¸ Remover Item" Command="{Binding RemoverProdutoCommand}"
                            Background="#E74C3C" Foreground="White" Padding="10,5" BorderThickness="0" Cursor="Hand"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Valor Total -->
        <Border Grid.Row="3" BorderBrush="#27AE60" BorderThickness="2" Padding="15" CornerRadius="5" Margin="0,0,0,15" Background="#E8F8F5">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <TextBlock Text="ðŸ’° Valor Total: " FontSize="18" FontWeight="Bold" Foreground="#27AE60" VerticalAlignment="Center"/>
                <TextBlock Text="{Binding Pedido.ValorTotal, Converter={StaticResource CurrencyConverter}}" FontSize="24" FontWeight="Bold" Foreground="#27AE60" VerticalAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- BotÃµes de AÃ§Ã£o -->
        <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="âŒ Cancelar" Command="{Binding CancelarCommand}"
                    Background="#95A5A6" Foreground="White" Padding="20,10" Margin="0,0,10,0" BorderThickness="0" Cursor="Hand" FontSize="14"/>
            <Button Content="âœ… Finalizar Pedido" Command="{Binding FinalizarPedidoCommand}"
                    Background="#27AE60" Foreground="White" Padding="20,10" BorderThickness="0" Cursor="Hand" FontSize="14" FontWeight="Bold"/>
        </StackPanel>
    </Grid>
</Window>

