<UserControl x:Class="WpfApp.Views.ProdutoView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="White">
    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </UserControl.Resources>
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- TÃ­tulo -->
        <TextBlock Grid.Row="0" Text="ðŸ“¦ Cadastro de Produtos" 
                   FontSize="24" FontWeight="Bold" 
                   Foreground="#2C3E50" Margin="0,0,0,20"/>

        <!-- Filtro e BotÃµes -->
        <Grid Grid.Row="1" Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" Orientation="Horizontal">
                <TextBlock Text="Filtrar por:" VerticalAlignment="Center" Margin="0,0,10,0" FontWeight="Bold"/>
                <ComboBox Width="150" 
                          SelectedValue="{Binding TipoFiltroSelecionado}"
                          SelectedValuePath="Content"
                          Margin="0,0,10,0">
                    <ComboBoxItem Content="Nome" IsSelected="True"/>
                    <ComboBoxItem Content="CÃ³digo"/>
                    <ComboBoxItem Content="Faixa de Valor"/>
                </ComboBox>
                
                <!-- Filtro por texto (Nome ou CÃ³digo) -->
                <TextBox Width="300" 
                         Text="{Binding ValorFiltro, UpdateSourceTrigger=PropertyChanged}"
                         Style="{StaticResource SearchTextBoxStyle}"
                         Visibility="{Binding MostrarFiltroTexto, Converter={StaticResource BooleanToVisibilityConverter}}"
                         Margin="0,0,10,0"/>
                
                <!-- Filtro por Faixa de Valor -->
                <StackPanel Orientation="Horizontal" 
                            Visibility="{Binding MostrarFiltroFaixa, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <TextBlock Text="Min:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                    <TextBox Width="100" 
                             Text="{Binding ValorMinimo, UpdateSourceTrigger=PropertyChanged}"
                             ToolTip="Valor mÃ­nimo"
                             Margin="0,0,10,0"/>
                    <TextBlock Text="Max:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                    <TextBox Width="100" 
                             Text="{Binding ValorMaximo, UpdateSourceTrigger=PropertyChanged}"
                             ToolTip="Valor mÃ¡ximo"
                             Margin="0,0,10,0"/>
                </StackPanel>
            </StackPanel>

            <StackPanel Grid.Column="1" Orientation="Horizontal">
                <Button Content="âž• Incluir" Command="{Binding AdicionarCommand}" 
                        Style="{StaticResource ActionButtonStyle}"/>
                <Button Content="âœï¸ Editar" Command="{Binding EditarCommand}" 
                        Style="{StaticResource ActionButtonStyle}"/>
                <Button Content="ðŸ’¾ Salvar" Command="{Binding SalvarCommand}" 
                        Style="{StaticResource ActionButtonStyle}"/>
                <Button Content="ðŸ—‘ï¸ Excluir" Command="{Binding ExcluirCommand}" 
                        Style="{StaticResource ActionButtonStyle}"/>
            </StackPanel>
        </Grid>

        <!-- Lista e Detalhes -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="3*"/>
            </Grid.ColumnDefinitions>

            <!-- Lista de Produtos -->
            <DataGrid Grid.Column="0" 
                      ItemsSource="{Binding Produtos}"
                      SelectedItem="{Binding ProdutoSelecionado}"
                      AutoGenerateColumns="False"
                      IsReadOnly="True"
                      Style="{StaticResource DataGridStyle}"
                      Margin="0,0,10,0">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="CÃ³digo" Binding="{Binding Codigo}" Width="Auto"/>
                    <DataGridTextColumn Header="Nome" Binding="{Binding Nome}" Width="*"/>
                    <DataGridTextColumn Header="PreÃ§o" Binding="{Binding Preco, StringFormat=C}" Width="Auto"/>
                    <DataGridTextColumn Header="Estoque" Binding="{Binding QuantidadeEstoque}" Width="Auto"/>
                </DataGrid.Columns>
            </DataGrid>

            <!-- Detalhes do Produto -->
            <Border Grid.Column="1" BorderBrush="#BDC3C7" BorderThickness="1" 
                    Padding="15" CornerRadius="5">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel DataContext="{Binding ProdutoSelecionado}">
                        <TextBlock Text="Detalhes do Produto" FontSize="16" 
                                   FontWeight="Bold" Margin="0,0,0,15"/>

                        <TextBlock Text="Nome:"/>
                        <TextBox Text="{Binding Nome, UpdateSourceTrigger=PropertyChanged}" 
                                 Margin="0,0,0,10"/>

                        <TextBlock Text="CÃ³digo:"/>
                        <TextBox Text="{Binding Codigo, UpdateSourceTrigger=PropertyChanged}" 
                                 Margin="0,0,0,10"/>

                        <TextBlock Text="DescriÃ§Ã£o:"/>
                        <TextBox Text="{Binding Descricao, UpdateSourceTrigger=PropertyChanged}" 
                                 Height="60" TextWrapping="Wrap" 
                                 AcceptsReturn="True" Margin="0,0,0,10"/>

                        <TextBlock Text="PreÃ§o:"/>
                        <TextBlock Text="Exemplo: 12,50" FontSize="10" Foreground="Gray" Margin="0,0,0,2"/>
                        <TextBox Text="{Binding Preco, StringFormat=N2, UpdateSourceTrigger=LostFocus, TargetNullValue=''}" 
                                 ToolTip="Digite o valor com vÃ­rgula (ex: 12,50)"
                                 Margin="0,0,0,10"/>

                        <TextBlock Text="Quantidade em Estoque:"/>
                        <TextBox Text="{Binding QuantidadeEstoque, UpdateSourceTrigger=PropertyChanged}" 
                                 Margin="0,0,0,10"/>

                        <TextBlock Text="Categoria:"/>
                        <TextBox Text="{Binding Categoria, UpdateSourceTrigger=PropertyChanged}" 
                                 Margin="0,0,0,10"/>

                        <TextBlock Text="CÃ³digo de Barras:"/>
                        <TextBox Text="{Binding CodigoBarras, UpdateSourceTrigger=PropertyChanged}" 
                                 Margin="0,0,0,10"/>
                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Grid>
    </Grid>
</UserControl>

